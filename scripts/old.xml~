<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project name="cleer-core">
    <path id="path.build.classpath">
      <fileset dir="artifacts/core" includes="**/*.jar" />
      <fileset dir="artifacts/${cleer.target}" includes="**/*.jar" />
      <fileset dir="tmp/build/jars/core" includes="**/*.jar" />
      <fileset dir="tmp/build/${cleer.target}" includes="**/*.jar" />
    </path>
    
    <target name="compile-platform-desktop">
	<mkdir dir="tmp/build/bin" />
	<mkdir dir="tmp/build/jars" />
	<copy file="../submodules/jline2/target/jline-2.11-SNAPSHOT.jar" todir="tmp/build/jars" />
	<javac includeAntRuntime="false" srcdir="src" destdir="tmp/build/bin" classpathref="path.build.classpath" />
    </target>
    <target name="desktop-jar" depends="desktop-compile">
        <jar destfile="cleer.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Main-Class" value="pro.trousev.jplay.desktop.ConsoleClient"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="tmp/build/bin"/>
            <zipgroupfileset dir="." excludes="META-INF/*.SF" includes="jars/*.jar" />
            <zipgroupfileset dir="." excludes="META-INF/*.SF" includes="tmp/build/jars/*.jar" />
        </jar>
    </target>
</project>
